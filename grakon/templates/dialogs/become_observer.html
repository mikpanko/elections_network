{% load elements %}

<div id="become_observer_dialog">
    <center>
        <span class="dialog_switch_button dialog_switch_button_active" id="grakon_btn">На площадке</span>
        <span class="dialog_switch_button" id="partner_btn">Оформить документы</span>
    </center>

    <br/>

    <div id="grakon_tab">
        <b>Если вы уже записались в наблюдатели</b>, выберите соответствущую организацию/партию/кандидата:

        <center>
            <form id="become_observer_form" method="post" action="{% url become_observer %}">
                {% csrf_token %}
                <select name="organization">
                    {% for organization in organizations %}
                        {% if organization.signup_observers %}
                            <option value="{{ organization.name }}">{{ organization.title }}</option>
                        {% endif %}
                    {% endfor %}
                </select>
                <input type="hidden" name="tik" value="{{ current_location.id }}" />
            </form>
        </center>

        После нажатия кнопки "Записаться", вы появитесь в списке наблюдателей, однако этот статус
        не будет являться подтвержденным. В ближайшее время мы введем возможность верифицировать этот статус.
    </div>

    <div id="partner_tab" style="display:none;">
        <b>Если вы еще не записались в наблюдатели</b>, мы рекоммендуем заполнить форму на сайте
        <a href="http://www.nabludatel.org/stat-nablyudatelem/" target="_blank">Гражданин наблюдатель</a>.

        <ul>
            <li>
                <b></b><br/>
                Гражданин Наблюдатель проводит интенсивные тренинги для обучения наблюдателей эффективным действиям
                в случаях обнаружения нарушений на участках, включая практические упражнения. Выдает направления
                в наблюдатели от СМИ и партий.
                <br/>
                После заполнения анкеты на сайте Гражданина Наблюдателя с Вами свяжутся в течение нескольких дней и пригласят на тренинг. Сразу после этого мы добавим Вам статус наблюдателя на площадке Гракон.
                <br/>
                Если Вы уже записались в наблюдатели через Гражданин Наблюдатель, то в ближайшее время на вашу электронную почту
                придет письмо с инструкцией по получению статуса наблюдателя на площадке.
            </li>

            <li>
                <b>Партнер</b><br/>
                Здесь будут добавляться дополнительные возможности стать наблюдателем с появлением новых партнеров.
            </li>
        </ul>
    </div>
</div>

<script type="text/javascript">
    // Become observer dialog
    function become_observer_dialog_init(){
        $("#become_observer_dialog").dialog("open");

        $("#grakon_btn").click(function(){
            $("#grakon_btn").addClass("dialog_switch_button_active");
            $("#partner_btn").removeClass("dialog_switch_button_active");

            $("#grakon_tab").show();
            $("#partner_tab").hide();

            $("#become_observer_dialog").dialog("option", "buttons",
                    [signup_button, cancel_button]);
        });
        $("#partner_btn").click(function(){
            $("#grakon_btn").removeClass("dialog_switch_button_active");
            $("#partner_btn").addClass("dialog_switch_button_active");

            $("#grakon_tab").hide();
            $("#partner_tab").show();

            $("#become_observer_dialog").dialog("option", "buttons", [cancel_button]);
        });
    }

    var signup_button = {
        text: "Записаться",
        click: function signup(){signup_for_role("observer", "{{ request.path }}");}
    };

    var cancel_button = {text: "Отмена", click: function(){
        $("#become_observer_dialog").dialog("close");
    }};

    $("#become_observer_dialog").dialog({width:650, height:450, modal: true,
            title: "Записаться в наблюдатели", buttons: [signup_button, cancel_button]
    }).dialog("close");
</script>
